var state="vs";$("#shaderSelector").on("click",function(){state!==$(this).val()&&(state=$(this).val(),syncCode(),clearEditor())});var editor=ace.edit("editor");function clearEditor(){editor.getSession().setUndoManager(new ace.UndoManager)}function syncCode(){if("vs"===state){var e=scriptenModule.get_pbr_shader_sources_js();editor.setValue(e[0],-1)}else if("fs"===state){e=scriptenModule.get_pbr_shader_sources_js();editor.setValue(e[1],-1)}else if("ppvs"===state){e=scriptenModule.get_post_shader_sources_js();editor.setValue(e[0],-1)}else if("ppfs"===state){e=scriptenModule.get_post_shader_sources_js();editor.setValue(e[1],-1)}}editor.session.setMode("ace/mode/glsl"),editor.commands.addCommand({name:"save",bindKey:{win:"Ctrl-S",mac:"Cmd-S"},exec:function(e){var s=e.getValue();if("vs"===state)(t=scriptenModule.get_pbr_shader_sources()).set(0,s.split("\n").splice(1).join("\n")),t.set(1,t.get(1).split("\n").splice(1).join("\n")),scriptenModule.set_pbr_shader_sources_js(t);else if("fs"===state){s=e.getValue();(t=scriptenModule.get_pbr_shader_sources()).set(0,t.get(0).split("\n").splice(1).join("\n")),t.set(1,s.split("\n").splice(1).join("\n")),scriptenModule.set_pbr_shader_sources_js(t)}else if("ppvs"===state){s=e.getValue();(t=scriptenModule.get_post_shader_sources()).set(0,s.split("\n").splice(1).join("\n")),t.set(1,t.get(1).split("\n").splice(1).join("\n")),scriptenModule.set_post_shader_sources_js(t)}else if("ppfs"===state){var t;s=e.getValue();(t=scriptenModule.get_post_shader_sources()).set(0,t.get(0).split("\n").splice(1).join("\n")),t.set(1,s.split("\n").splice(1).join("\n")),scriptenModule.set_post_shader_sources_js(t)}}}),clearEditor();